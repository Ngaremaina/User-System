{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import Header from'./Header';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManagerDashboard=_ref=>{let{departments}=_ref;const[tasks,setTasks]=useState([]);useEffect(()=>{const fetchTasks=async()=>{try{const response=await axios.get(\"/tasks\");setTasks(response.data);}catch(err){console.error('Error fetching tasks');}};fetchTasks();},[]);const handleDelete=async id=>{try{await axios.delete(\"/users/\".concat(id));console.log(\"User Deleted successfully\");window.location.reload();}catch(err){console.error('Error deleting user');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"flex justify-center mb-3 font-bold uppercase\",children:\"Employee List\"}),departments.map(department=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"flex justify-center mb-3 font-bold uppercase\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Department: \"}),department.name]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 mb-5 mt-3\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"Tasks\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"Edit User\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3\",children:\"Delete User\"})]})}),department.users.map(user=>!user.is_manager?/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-white border-b dark:bg-gray-800 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:user.id}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white\",children:user.username}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:\"Employee\"}),/*#__PURE__*/_jsx(\"td\",{children:user.tasks.map(task=>/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:task.title})},task.id))}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{className:\"mt-2 focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800\",to:\"/update user/\".concat(user.id),children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900\",onClick:()=>handleDelete(user.id),children:\"Delete\"})})]})},user.id):null)]})]},department.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center mt-10 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\",children:\"Task Completion Rates\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-normal text-gray-700 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:tasks.length}),\" Pending Tasks\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-normal text-gray-700 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:tasks.filter(task=>task.status==='completed').length}),\" Completed Tasks\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-normal text-gray-700 dark:text-gray-400\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[(tasks.length>0?tasks.filter(task=>task.status==='completed').length/tasks.length*100:0).toFixed(2),\"%\"]}),\" Completion Rate\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\",children:\"Pending Tasks\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-normal text-gray-700 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:tasks.filter(task=>task.status!=='completed').length}),\" Total Tasks\"]})]})]})]})]});};export default ManagerDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","Header","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManagerDashboard","_ref","departments","tasks","setTasks","fetchTasks","response","get","data","err","console","error","handleDelete","id","delete","concat","log","window","location","reload","children","className","map","department","name","scope","users","user","is_manager","username","email","task","title","to","onClick","length","filter","status","toFixed"],"sources":["/home/ngare/Development/code/User-System/my-app/src/components/ManagerDashBoard.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nimport Header from './Header';\nimport { Link } from 'react-router-dom';\nimport { DepartmentsProps, Task } from '../types';\n\n\nconst ManagerDashboard: React.FC<DepartmentsProps> = ({departments}) => {\n    const [tasks, setTasks] = useState<Task[]>([]);\n\n    useEffect(() => {\n\n        const fetchTasks = async () => {\n            \n            try {\n              const response = await axios.get<Task[]>(\"/tasks\");\n              setTasks(response.data);\n            } catch (err) {\n              console.error('Error fetching tasks');\n            } \n          };\n    \n        fetchTasks();\n      }, []);\n    \n    const handleDelete = async (id: number) => {\n        \n        try {\n            await axios.delete(`/users/${id}`);\n            console.log(\"User Deleted successfully\")\n            window.location.reload()\n          } catch (err) {\n            console.error('Error deleting user');\n          }\n      }\n\n     \n      return(\n        <>\n\n        <Header />\n        \n        \n      \n        <div className='mt-2'>\n          <h1 className='flex justify-center mb-3 font-bold uppercase'>Employee List</h1>\n          \n          {departments.map(department => (\n            <div key={department.id}>\n                <hr/>\n                <p className='flex justify-center mb-3 font-bold uppercase'><strong >Department: </strong>{department.name}</p>\n                <table className='w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 mb-5 mt-3'>\n\n                <thead className='text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400'>\n\n                \n                    <tr>\n                        <th scope=\"col\" className=\"px-6 py-3\">ID</th>\n                        <th scope=\"col\" className=\"px-6 py-3\">Name</th>\n                        <th scope=\"col\" className=\"px-6 py-3\">Email Address</th>\n                        <th scope=\"col\" className=\"px-6 py-3\">Role</th>\n                        <th scope=\"col\" className=\"px-6 py-3\">Tasks</th>\n                        <th scope=\"col\" className=\"px-6 py-3\">Edit User</th>\n                        <th scope=\"col\" className=\"px-6 py-3\">Delete User</th>\n\n                    </tr>\n                </thead>\n                {department.users.map(user => (\n                    !user.is_manager ? (\n                        <tbody key={user.id}>\n\n                        \n                        <tr className='bg-white border-b dark:bg-gray-800 dark:border-gray-700'>\n                            <td className=\"px-6 py-4\">{user.id}</td>\n                            <th scope=\"row\" className=\"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white\">{user.username}</th>\n                            <td className=\"px-6 py-4\">{user.email}</td>\n                            <td className=\"px-6 py-4\">Employee</td>\n                            <td>\n                            {user.tasks.map(task => (\n                                <ul key={task.id}>\n                                    <li>{task.title}\n                                    </li>\n                                </ul> \n                            ))}\n                            </td>\n                            <td><Link className=\"mt-2 focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800\" to={`/update user/${user.id}`}>Edit</Link></td>\n                            <td><button className=\"mt-2 focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900\"onClick={() => handleDelete(user.id)}>Delete</button></td>\n                        </tr>\n                        </tbody>\n                    ) : null\n                ))}\n\n                </table>\n                            \n            </div>\n            \n          ))}\n\n          \n\n          <div className='flex flex-wrap justify-center mt-10 gap-4'>\n\n            <div className=\"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\">\n            <h5 className=\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\">Task Completion Rates</h5>\n            \n            <p className=\"font-normal text-gray-700 dark:text-gray-400\"><strong>{tasks.length}</strong> Pending Tasks</p>\n            <p className=\"font-normal text-gray-700 dark:text-gray-400\"><strong>{tasks.filter(task => task.status === 'completed').length}</strong> Completed Tasks</p>\n            <p className=\"font-normal text-gray-700 dark:text-gray-400\"><strong>{(tasks.length > 0 ? (tasks.filter(task => task.status === 'completed').length / tasks.length) * 100 : 0).toFixed(2)}%</strong> Completion Rate</p>\n            </div>\n\n            <div className=\"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\">\n            <h5 className=\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\">Pending Tasks</h5>\n            \n            <p className=\"font-normal text-gray-700 dark:text-gray-400\"><strong>{tasks.filter(task => task.status !== 'completed').length}</strong> Total Tasks</p>\n            \n            </div>\n        </div>\n\n\n        \n          \n        </div>\n\n        </>\n      )\n}\n\nexport default ManagerDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}