{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Header from'./Header';import{useParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UpdateDepartmentForm=_ref=>{let{departments}=_ref;const{id}=useParams();const[formData,setFormData]=useState({name:''});useEffect(()=>{const fetchUserDetails=async()=>{try{const response=await axios.get(\"/departments/\".concat(id));setFormData(response.data);}catch(error){console.error('Error fetching department details:',error);setError('Error fetching department details');}};fetchUserDetails();},[id]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleChange=event=>{const{name,value,type}=event.target;if(type==='checkbox'){setFormData(prevFormData=>({...prevFormData,[name]:event.target.checked}));}else{setFormData(prevFormData=>({...prevFormData,[name]:value}));}};const handleSubmit=async event=>{event.preventDefault();setLoading(true);setError(null);// Create an object with only the fields to be updated\nconst updatedData={name:formData.name};try{console.log('Submitting data:',updatedData);// Log the data being submitted\nawait axios.patch(\"/departments/\".concat(id),updatedData);console.log('Department updated successfully');// Optionally handle success (e.g., show success message, redirect)\n}catch(error){console.error('Error updating department:',error);if(error.response){console.error('Response data:',error.response.data);console.error('Response status:',error.response.status);console.error('Response headers:',error.response.headers);setError(\"Error updating user: \".concat(error.response.data.message||'Bad Request'));}else{setError('Error updating user');}}finally{setLoading(false);}window.location.reload();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mt-5 w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\",children:/*#__PURE__*/_jsx(\"strong\",{className:\"uppercase\",children:\" Department\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-normal text-gray-700 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),formData.name]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"flex justify-center mb-3 font-bold uppercase\",children:\"Update Department\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"max-w-sm mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"block mb-2 text-sm font-medium text-gray-900\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"mt-3 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\",children:\"Update Department\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mt-2\",children:error})]})]})]});};export default UpdateDepartmentForm;","map":{"version":3,"names":["React","useState","useEffect","axios","Header","useParams","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateDepartmentForm","_ref","departments","id","formData","setFormData","name","fetchUserDetails","response","get","concat","data","error","console","setError","loading","setLoading","handleChange","event","value","type","target","prevFormData","checked","handleSubmit","preventDefault","updatedData","log","patch","status","headers","message","window","location","reload","children","className","onSubmit","htmlFor","onChange"],"sources":["/home/ngare/Development/code/User-System/my-app/src/components/UpdateDepartment.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Header from './Header';\nimport { useParams } from 'react-router-dom';\nimport { DepartmentsProps, DepartmentDetails } from '../types';\n\n\nconst UpdateDepartmentForm: React.FC<DepartmentsProps> = ({departments}) => {\n    const { id } = useParams<{ id: string }>();\n    \n    const [formData, setFormData] = useState<DepartmentDetails >({\n        name: '',\n        \n    });\n\n    useEffect(() => {\n        const fetchUserDetails = async () => {\n            try {\n                const response = await axios.get<DepartmentDetails >(`/departments/${id}`);\n                setFormData(response.data);\n            } catch (error) {\n                console.error('Error fetching department details:', error);\n                setError('Error fetching department details');\n            }\n        };\n        \n        fetchUserDetails();\n    }, [id]);\n\n    \n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);   \n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value, type } = event.target;\n        if (type === 'checkbox') {\n            setFormData((prevFormData) => ({\n                ...prevFormData,\n                [name]: (event.target as HTMLInputElement).checked,\n            }));\n        } else {\n            setFormData((prevFormData) => ({\n                ...prevFormData,\n                [name]: value,\n            }));\n        }\n    };\n\n    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        setLoading(true);\n        setError(null);\n\n        // Create an object with only the fields to be updated\n        const updatedData: Partial<DepartmentDetails > = {\n            name: formData.name,\n            \n        };\n\n\n        try {\n            console.log('Submitting data:', updatedData); // Log the data being submitted\n            await axios.patch(`/departments/${id}`, updatedData);\n            console.log('Department updated successfully');\n            // Optionally handle success (e.g., show success message, redirect)\n        } catch (error: any) {\n            console.error('Error updating department:', error);\n            if (error.response) {\n                console.error('Response data:', error.response.data);\n                console.error('Response status:', error.response.status);\n                console.error('Response headers:', error.response.headers);\n                setError(`Error updating user: ${error.response.data.message || 'Bad Request'}`);\n            } else {\n                setError('Error updating user');\n            }\n        } finally {\n            setLoading(false);\n        }\n\n        window.location.reload()\n        \n        \n    };\n\n    return (\n        <>\n            <Header />\n            <div className='flex justify-center mt-5 w-full'>\n                <div className='w-1/2 flex justify-center'>\n                    <div  className=\"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\">\n                    <h5 className=\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\"><strong className='uppercase'> Department</strong></h5>\n                    <p className=\"font-normal text-gray-700 dark:text-gray-400\"><strong>Name: </strong>{formData.name}</p>\n                    \n                    </div>\n                </div>\n\n            \n            <div className=\"w-1/2\">\n                <h2 className=\"flex justify-center mb-3 font-bold uppercase\">Update Department</h2>\n                <form onSubmit={handleSubmit} className=\"max-w-sm mx-auto\">\n                    <div>\n                        <label htmlFor=\"username\" className=\"block mb-2 text-sm font-medium text-gray-900\">\n                            Name:\n                        </label>\n                        <input\n                            className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\n                            type=\"text\"\n                            id=\"name\"\n                            name=\"name\"\n                            value={formData.name}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    \n                    <button\n                        type=\"submit\"\n                        className=\"mt-3 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\n                    >\n                        Update Department\n                    </button>\n                </form>\n                {loading && <p>Loading...</p>}\n                {error && <p className=\"text-red-500 mt-2\">{error}</p>}\n            </div>\n\n          \n            </div>\n        </>\n    );\n};\n\nexport default UpdateDepartmentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}